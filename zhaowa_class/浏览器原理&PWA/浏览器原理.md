


## 浏览器架构

Browser Process(一个) ： 负责浏览器主体部分，包含导航栏，书签，前进，后退按钮
Network(一个)：网络进程，负责页面的网络资源加载
GPU(一个)：图像渲染进程



### 多进程的坏处是什么？

有些比较公共的东西，会在不同的进程内存空间中存在，就消耗了不比要的内存空间

- Chrome怎么优化这种情况？

限制启动的进程数目。当启动的进程数达到上限后，访问同一域名的tab都会放在一个进程里。

- Chrome的服务化

将某些大的服务拆分成小服务模块，当遇到性能好的设备时，每个服务可以有独立的进程，保证系统的稳定性；当遇到性能不好的设备时，这些服务会被集中在一个进程里，减少内存的小号。

### 网站隔离

iframe

当tab页存在跨站的iframe,那么这个iframe会拥有独立的渲染进程。

b.com
iframe a.com

### 导航时究竟都发生了什么？

1. url解析
2. dns查询
3. tcp连接
4. 发送Http请求
5. 接收http响应请求
6. 页面渲染
  1. 解析html,构建dom树
  2. 解析 css,构建css规则书
  3. 合并dom树和css规则树，生成render树
  4. 布局render树
  5. 绘制render树，
  6. 浏览器将各层的信息发送给GPU, GPU将各层合成，显示在屏幕上


### 处理输入

UI线程 来判断输入的内容是关键词还是url?

### 开始导航

当用户按下回车，UI线程会通知网络进程来初始化一个网络请求，来获取站点内容。

- 301

网络进程会通知UI线程进行重定向，然后再发起一个网络请求

- DNS查询是在哪里做的？ 
网络进程，在收到UI线程的通知后开始做的

### 读取响应

### 布局 layout

什么时候会触发回流呢？

为什么动画提倡transform 


由于每次重排/回流 都会造成额外的小号，所以大多数浏览器都会通过队列化修改来批量执行优化重排过程（flush)
flush:[a,b,c,...]

offsetTop

当你获取布局信息的操作时，这些信息都会返回最新的数据。
浏览器不得不清空队列，触发回流重绘来返回正确的值。

### 绘制

z-index


渲染流水线：解释为什么回流必然重绘，重绘不一定会回流。 因为先 layout 再 paint



ps： dnsprefech
碰到带标签的资源解析。提高子资源解析速度

#### 练习题

1. 地址栏输入一个url

js会阻塞HTML的解析过程吗？为什么？

什么情况下触发回流/重排？




z-index使用条件有哪些？什么时候生效