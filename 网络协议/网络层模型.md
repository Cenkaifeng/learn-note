
##### 为什么要OSI分层: OSI 与 TCP/IP 模型

分层是为了各层之间专注于相邻层级的数据互通，便于进行模块化管理。

为什么实际没有7层分级，是因为分太细会导致数据传递延迟。

* 应用层
    DNS, WWW/HTTP, P2P, EMAIL/POP,SMTP,Telnet,FTP, DHCP

* 表示层
    Recognizing data: HTML, DOC, JPEG, MP3, AVI, Sockets

* 会话层
    Session establishment in TCP, SIP, RTP , RPC-named pipes

* 传输层
    TCP,UDP,SCTP,SSL,TLS

* 网络层
    IP, ARP, IPsec, ICMP, IGMP, OSPF

* 数据链路层
    以太网：Ethernet 802.11, MAC/LLC, VALN, ATM, HDP , FIBRE CHANNEL

* 物理层
    RS-232, Rj45, v.34, 100BASE-TX, SDH, DSL,802.11


TCP/IP:
应用层 - 传输层 - 网络层 - 网络接口层


##### OSI 七层模型 理想化的模型，给我们的网络划分层次（实际上只是理论模型）

> 我们可以将复杂的内容简单化，每一层都专人做专事

应用层：用户最终使用的接口，微信、qq、浏览器网页 【说话】
表示层：怎么去吧数据进行描述、压缩  【整理话术，表达出来】
会话层：建立 会话和管理会话的

> 应用层

传输层：把数据传递给对方，怎么传？丢了要不要重新传递？
网络层：网络层是寻址【你要增加你家的具体位置还要增加对方的地址】

> 网络接口层

数据链路层：主要惯性的是将两个设备连接起来连接数据
物理层：只关系如何传递数据 0 1 传输的是比特流 【最终的交通工具】

##### 七层协议真正都做了什么事请？

- 报文 应用层+ 数据
- 数据段 传输层 + 数据 + 端口号
- 数据包 网络层 + 数据 + 端口 + ip地址
- 数据帧 链路层 + 数据 + 端口 + ip + mac地址

> ip 地址 + mac 地址

192.168.1.1
IPV4 IP地址的第四个版本 最大值 255^4 约等于 42亿个
IPV6 16位（每八个位有16进制组成）

mac地址 原则上是唯一的（每个生产出来的网卡自动会写入一个mac地址）


##### 设备
###### 物理层有什么设备呢？
- 光纤 同轴电缆 网线 中继器 集线器

网线 100m 最大传输距离（5/6类线都开始损耗，所以要个中继器放大信号... ） （局域网）
物理层就是关心怎么传数据的

###### 链路层

- 交换机 ：比中继器聪明点，（局域网通信）

###### 网络层设备

- 路由器：默认两个不同的网络不能相互通信，想让两个不同设备通信就需要经历网关。（通过子网掩码判断然后通信）
和交换机的区别就是有没有wan口，能不能上网

wan: 对外部网络（如果没有wan,可以把它看成交换机）
lan：局域网

##### 网络中的协议TCP/IP 族

> ARP 是有歧义的（核心价值在于将ip地址转换成mac地址） 
ARP 网络层协议，不基于`tcp/udp`进行**广播**，然后会做个**缓存表**，将物理地址和ip地址做个映射（与之对应的还有个 RARP协议（ MAC -> IP）
然后交换机也做地址表。
自带缓存点，不会到交换机或者路由器

ARP 攻击：...

> DHCP 动态主机配置协议 Dynamic Host Configuration
**应用层**协议，动态给你分配IP,我们无需自己手动配置IP,动态可控基于udp

下层为上层提供服务的
##### DNS （Domain Name System）

DNS属于链路层、网络层协议用，域名来替代ip,因为用户很难记住ip地址
如何解析？
- 从后往前递归解析...

访问前会有两种情况：
1. 被解析过，可以获取缓存
2. 没被解析过，逐级查找
3. 直到根域名（顶级域名开始逐级从后往前递归） 

快吗？
同时，由于基于udp（无连接）, 每次查找都不像tcp那样建立连接，就很快。再次查找会直接找到DNS服务器对ip和域名的缓存。

